@startuml
'https://plantuml.com/activity-diagram-beta

title Client : Payer leur commande

start

:Baptiste arrive sur le site;
:Baptiste clique sur "Se connecter";
:Affichage du formulaire de connexion;
:Baptiste entre son identifiant et son mot de passe;
:Baptiste clique sur valider;
:Connexion au compte;
:Baptiste clique sur "Menu";
:Affichage de la page "Menu";

repeat :Baptiste clique sur le produit qu'il souhaite;
    :Baptiste entre la quantité;
    :Baptiste clique sur "Valider";
    :Ajout du produit au panier;
repeat while (Baptiste souhaite-t-il commander un autre produit ?) is (oui) not (non)

:Baptiste clique sur "Valider ma commande";
:Enregistrement de la commande;
:Actualisation de la liste des commandes sur l'application back-office;
:Affichage d'une page proposant le paiement en ligne immédiat;

if (Baptiste souhaite-il payer en ligne ?) then (Oui)
    :Baptiste clique sur le bouton "Payer maintenant";

    repeat :Affichage du formulaire de paiement;
        :Baptiste sélectionne son mode de paiement;
        :Baptiste entre ses informations de paiement;
        :Envoi d'une requête à la plateforme de paiement;
        backward:Affichage d'un message d'erreur;
    repeat while (Le paiement est-il effectué ?) is (non) not (oui)

    :Affichage d'un message de succès;
    :Passage de l'état de paiement en "Oui";
else (Non)
    :Baptiste clique sur le bouton "Payer à la réception";
endif

stop

@enduml
